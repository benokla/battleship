(()=>{"use strict";const e=()=>{let e=[];for(let t=0;t<10;t++){e.push([""]);for(let s=0;s<9;s++)e[t].push("")}let t=[];return{placeShips:function(s,o,a,n){let r=(e=>{let t=[];for(let e=0;e<10;e++){t.push([""]);for(let s=0;s<10;s++)t[e].push("")}return{length:e,isSunk:function(){let s=0;for(let e=0;e<10;e++)for(let o=0;o<10;o++)""!=t[e][o]&&s++;return s>=e},hit:function(e,s){t[s][e]="hit"},hits:t}})(a);if(t.push(r),"h"==n){if(s+a>9)return;e[o][s]=r;for(let t=1;t<a;t++)s++,e[o][s]=r}else if("v"==n){if(o+a>9)return;e[o][s]=r;for(let t=1;t<a;t++)o++,e[o][s]=r}},gameboard:e,receiveAttack:function(t,s){if(""!=e[s][t])return e[s][t].hit(t,s),[!0,t,s];{let e=[!1,t,s];return console.log("Its a miss"),e}},allShipsSunk:function(){return!t.map((e=>e.isSunk())).includes(!1)}}},t=(()=>{const e=document.querySelector(".info");return{displayBoard:function(e,t){for(let s=0;s<t.length;s++)for(let o=0;o<t[s].length;o++){const a=document.createElement("div");a.dataset.posX=o,a.dataset.posY=s,a.classList.add("field"),e.appendChild(a),a.textContent=""==t[s][o]?"":"X"}},markBoard:function(e,t,s,o,a){if(0==a){let o=document.querySelector(".myGameboard").querySelectorAll(".field"),a=Array.from(o).find((e=>e.dataset.posX==t&&e.dataset.posY==s));e?a.classList.add("hit"):a.classList.add("miss")}else e?a.target.classList.add("hit"):a.target.classList.add("miss")},showMessage:function(t){e.textContent=t}}})(),s=e=>({name:e,swapTurn:function(){return!0},turn:!1});(()=>{const o=document.querySelector(".myGameboard"),a=document.querySelector(".pcGameboard"),n=e(),r=e(),i=s("Jakob");function l(){if(u())return;let e=n.receiveAttack(d(9),d(9));e[0]?t.showMessage(`PC shot on the coordinates ${e[1]} ${e[2]} and ... hit!`):t.showMessage(`PC shot on the coordinates ${e[1]} ${e[2]} and ... missed.`),t.markBoard(e[0],e[1],e[2],n,!1),i.swapTurn()}function u(){return!(!n.allShipsSunk()&&!r.allShipsSunk())}function d(e){return Math.floor(Math.random()*e)}s("PC"),n.placeShips(3,3,3,"h"),n.placeShips(7,5,3,"v"),r.placeShips(3,3,3,"h"),r.placeShips(7,5,3,"v"),t.displayBoard(o,n.gameboard),t.displayBoard(a,r.gameboard),i.turn=i.swapTurn(),a.querySelectorAll(".field").forEach((e=>{e.addEventListener("click",(e=>{if(i.turn){let s=r.receiveAttack(e.target.dataset.posX,e.target.dataset.posY);if(s[0]?t.showMessage(`You shot on the coordinates ${s[1]} ${s[2]} and ... hit!`):t.showMessage(`You shot on the coordinates ${s[1]} ${s[2]} and ... missed.`),t.markBoard(s[0],s[1],s[2],r,e),u())return void(r.allShipsSunk()?t.showMessage("You won"):t.showMessage("The PC won"));i.swapTurn(),console.log(i.turn),setTimeout(l,3e3)}}))}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3VCLEVBQUdJLGFBQWE0QixFQUFhRSxFQUFJekQsV0FFakMwRCxFQUFJTCxLQUFPSyxFQUFJTixXQUVLRyxFQUFZZCxpQkFBaUIsVUFDckMwQixTQUFRckIsSUFDaEJBLEVBQVFzQixpQkFBaUIsU0FBVTdCLElBRS9CLEdBQUdtQixFQUFJTCxLQUFNLENBQ1QsSUFBSVEsRUFBTUosRUFBSXpDLGNBQWN1QixFQUFFUSxPQUFPaEIsUUFBUXpCLEtBQU1pQyxFQUFFUSxPQUFPaEIsUUFBUXhCLE1BT3BFLEdBTkdzRCxFQUFJLEdBQ0h0QyxFQUFHeUIsWUFBWSwrQkFBK0JhLEVBQUksTUFBTUEsRUFBSSxtQkFFNUR0QyxFQUFHeUIsWUFBWSwrQkFBK0JhLEVBQUksTUFBTUEsRUFBSSxzQkFFaEV0QyxFQUFHYSxVQUFVeUIsRUFBSSxHQUFJQSxFQUFJLEdBQUlBLEVBQUksR0FBSUosRUFBS2xCLEdBQ3ZDcUIsSUFNQyxZQUxHSCxFQUFJckMsZUFDSEcsRUFBR3lCLFlBQVksV0FFZnpCLEVBQUd5QixZQUFZLGVBSXZCVSxFQUFJTixXQUNKbEMsUUFBUUMsSUFBSXVDLEVBQUlMLE1BQ2hCZ0IsV0FBV1YsRUFBUSxhQTVDdEIsSSIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvc2hpcEZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9nYW1lYm9hcmRGYWN0b3J5LmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvVUkuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9wbGF5ZXJGYWN0b3J5LmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgU2hpcCA9IChsZW5ndGgpID0+IHtcblxuICAgIGxldCBoaXRzID0gW107XG4gICAgLy8gW1tcIlwiLCBcIlwiLCBcIlwiLCAuLi4uXSwgW1wiXCIsIFwiXCIsIFwiXCIsIC4uLi5dLCAuLi4gW1wiXCIsIFwiXCIsIFwiXCIsIC4uLi5dIF1cbiAgICBmb3IobGV0IGkgPSAwOyBpPDEwOyBpKyspIHtcbiAgICAgICAgaGl0cy5wdXNoKFtcIlwiXSlcbiAgICAgICAgZm9yKGxldCB5ID0gMDsgeTwxMDsgeSsrKSB7XG4gICAgICAgICAgICBoaXRzW2ldLnB1c2goXCJcIilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzU3VuaygpIHtcbiAgICAgICAgbGV0IHJlY2VpdmVkU2hvdHMgPSAwO1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpPDEwOyBpKyspe1xuICAgICAgICAgICAgZm9yKGxldCB5ID0gMDsgeTwxMDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgaWYoaGl0c1tpXVt5XSAhPSBcIlwiKSByZWNlaXZlZFNob3RzKytcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZihyZWNlaXZlZFNob3RzID49IGxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoaXQocG9zWCwgcG9zWSkge1xuICAgICAgICBoaXRzW3Bvc1ldW3Bvc1hdID0gXCJoaXRcIjtcbiAgICB9XG5cbiAgICByZXR1cm4geyBsZW5ndGgsIGlzU3VuaywgaGl0LCBoaXRzfVxufTtcblxuXG5cbmV4cG9ydCB7IFNoaXAgfSIsImltcG9ydCB7IFNoaXAgfSBmcm9tIFwiLi9zaGlwRmFjdG9yeVwiO1xuXG5jb25zdCBHYW1lYm9hcmQgPSAoKSA9PiB7XG5cbiAgICBsZXQgZ2FtZWJvYXJkID0gW107XG4gICAgLy8gW1tcIlwiLCBcIlwiLCBcIlwiLCAuLi4uXSwgW1wiXCIsIFwiXCIsIFwiXCIsIC4uLi5dLCAuLi4gW1wiXCIsIFwiXCIsIFwiXCIsIC4uLi5dXVxuICAgIGZvcihsZXQgaSA9IDA7IGk8MTA7IGkrKykge1xuICAgICAgICBnYW1lYm9hcmQucHVzaChbXCJcIl0pXG4gICAgICAgIGZvcihsZXQgeSA9IDA7IHk8OTsgeSsrKSB7XG4gICAgICAgICAgICBnYW1lYm9hcmRbaV0ucHVzaChcIlwiKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHNoaXBzID0gW107XG4gICBcbiAgICBmdW5jdGlvbiBwbGFjZVNoaXBzKHBvc1gsIHBvc1ksIGxlbmd0aCwgZGlyKSB7XG4gICAgICAgIGxldCBzaGlwID0gU2hpcChsZW5ndGgpXG4gICAgICAgIHNoaXBzLnB1c2goc2hpcClcblxuICAgICAgICAvL2hvcml6b250YWxcbiAgICAgICAgaWYoZGlyID09IFwiaFwiKSB7XG4gICAgICAgICAgICBpZihwb3NYK2xlbmd0aCA+IDkpIHJldHVybjtcbiAgICAgICAgICAgIGdhbWVib2FyZFtwb3NZXVtwb3NYXSA9IHNoaXA7XG4gICAgICAgICAgICBmb3IobGV0IGkgPSAxOyBpPGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcG9zWCsrO1xuICAgICAgICAgICAgICAgIGdhbWVib2FyZFtwb3NZXVtwb3NYXSA9IHNoaXA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZihkaXIgPT0gXCJ2XCIpIHtcbiAgICAgICAgICAgIGlmKHBvc1krbGVuZ3RoID4gOSkgcmV0dXJuO1xuICAgICAgICAgICAgZ2FtZWJvYXJkW3Bvc1ldW3Bvc1hdID0gc2hpcDtcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDE7IGk8bGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBwb3NZKys7XG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkW3Bvc1ldW3Bvc1hdID0gc2hpcFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVjZWl2ZUF0dGFjayhwb3NYLCBwb3NZKSB7XG4gICAgICAgIGlmKGdhbWVib2FyZFtwb3NZXVtwb3NYXSAhPSBcIlwiKSB7XG4gICAgICAgICAgICBnYW1lYm9hcmRbcG9zWV1bcG9zWF0uaGl0KHBvc1gsIHBvc1kpXG4gICAgICAgICAgICByZXR1cm4gW3RydWUsIHBvc1gsIHBvc1ldXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgbWlzc2VkU2hvdCA9IFtmYWxzZSwgcG9zWCwgcG9zWV1cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSXRzIGEgbWlzc1wiKVxuICAgICAgICAgICAgcmV0dXJuIG1pc3NlZFNob3Q7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhbGxTaGlwc1N1bmsoKSB7XG4gICAgICAgIGxldCBzaGlwc1N1bmsgPSBzaGlwcy5tYXAoKHNoaXApID0+IHNoaXAuaXNTdW5rKCkgKVxuICAgICAgICBcbiAgICAgICAgaWYoc2hpcHNTdW5rLmluY2x1ZGVzKGZhbHNlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBwbGFjZVNoaXBzLCBnYW1lYm9hcmQsIHJlY2VpdmVBdHRhY2ssIGFsbFNoaXBzU3VuayB9XG59XG5cbmV4cG9ydCB7IEdhbWVib2FyZH0iLCJjb25zdCBVSSA9ICgoKSA9PiB7XG5cbiAgICBjb25zdCBpbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbmZvXCIpXG5cblxuICAgIGZ1bmN0aW9uIGRpc3BsYXlCb2FyZChjb250YWluZXIsIGdhbWVib2FyZCkge1xuICAgICAgICBcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaTxnYW1lYm9hcmQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGZvcihsZXQgeSA9IDA7IHk8Z2FtZWJvYXJkW2ldLmxlbmd0aDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBkaXYuZGF0YXNldC5wb3NYID0geTtcbiAgICAgICAgICAgICAgICBkaXYuZGF0YXNldC5wb3NZID0gaTtcbiAgICAgICAgICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZChcImZpZWxkXCIpO1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkaXYpXG4gICAgICAgICAgICAgICAgZGl2LnRleHRDb250ZW50ID0gZGlzcGxheVNoaXBzKGdhbWVib2FyZFtpXVt5XSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRpc3BsYXlTaGlwcyhlbGVtZW50LCB2aXNpYmxlKSB7XG4gICAgICAgICAgICBpZihlbGVtZW50ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIlxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJYXCJcbiAgICAgICAgICAgIH0gIFxuICAgICAgICB9XG5cbiAgICBmdW5jdGlvbiBtYXJrQm9hcmQoaXNIaXQsIHBvc1gsIHBvc1ksIGJvYXJkLCBlKSB7XG4gICAgICAgIGlmKGUgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGxldCBnYW1lYm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm15R2FtZWJvYXJkXCIpO1xuICAgICAgICAgICAgbGV0IG15RmllbGRzID0gZ2FtZWJvYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZmllbGRcIilcbiAgICAgICAgICAgIGxldCBteUZpZWxkc0FyciA9IEFycmF5LmZyb20obXlGaWVsZHMpXG4gICAgICAgICAgICBsZXQgbXlGaWVsZCA9IG15RmllbGRzQXJyLmZpbmQoZWxlbWVudCA9PiBlbGVtZW50LmRhdGFzZXQucG9zWCA9PSBwb3NYICYmIGVsZW1lbnQuZGF0YXNldC5wb3NZID09IHBvc1kpXG4gICAgICAgICAgICBpZihpc0hpdCkge1xuICAgICAgICAgICAgICAgIG15RmllbGQuY2xhc3NMaXN0LmFkZChcImhpdFwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbXlGaWVsZC5jbGFzc0xpc3QuYWRkKFwibWlzc1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYoaXNIaXQpIHtcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaGl0XCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKFwibWlzc1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3dNZXNzYWdlKHRleHQpIHtcbiAgICAgICAgaW5mby50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgfVxuXG5cbiAgICByZXR1cm4ge2Rpc3BsYXlCb2FyZCwgbWFya0JvYXJkLCBzaG93TWVzc2FnZX1cblxufSkoKTtcblxuZXhwb3J0IHsgVUkgfSIsImNvbnN0IFBsYXllciA9IChuYW1lKSA9PiB7XG5cbiAgICBsZXQgdHVybiA9IGZhbHNlO1xuXG4gICAgZnVuY3Rpb24gc3dhcFR1cm4oKSB7XG4gICAgICAgIGlmKHR1cm4gPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7IG5hbWUsIHN3YXBUdXJuLCB0dXJuIH1cblxufVxuXG5leHBvcnQgeyBQbGF5ZXIgfSIsImltcG9ydCB7IFNoaXAgfSBmcm9tIFwiLi9zaGlwRmFjdG9yeVwiO1xuaW1wb3J0IHsgR2FtZWJvYXJkIH0gZnJvbSBcIi4vZ2FtZWJvYXJkRmFjdG9yeVwiO1xuaW1wb3J0IHsgVUkgfSBmcm9tIFwiLi9VSVwiO1xuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vcGxheWVyRmFjdG9yeVwiO1xuXG5jb25zdCBnYW1lID0gKCgpID0+IHtcbiAgICBjb25zdCBteUdhbWVib2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubXlHYW1lYm9hcmRcIilcbiAgICBjb25zdCBwY0dhbWVib2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGNHYW1lYm9hcmRcIilcbiAgICBcbiAgICBcbiAgICBjb25zdCBnYjEgPSBHYW1lYm9hcmQoKTtcbiAgICBjb25zdCBnYjIgPSBHYW1lYm9hcmQoKTtcbiAgICBjb25zdCBwbDEgPSBQbGF5ZXIoXCJKYWtvYlwiKVxuICAgIGNvbnN0IHBsMiA9IFBsYXllcihcIlBDXCIpXG5cbiAgICBnYjEucGxhY2VTaGlwcygzLCAzLCAzLCBcImhcIilcbiAgICBnYjEucGxhY2VTaGlwcyg3LCA1LCAzLCBcInZcIilcblxuICAgIGdiMi5wbGFjZVNoaXBzKDMsIDMsIDMsIFwiaFwiKVxuICAgIGdiMi5wbGFjZVNoaXBzKDcsIDUsIDMsIFwidlwiKVxuXG5cbiAgICBVSS5kaXNwbGF5Qm9hcmQobXlHYW1lYm9hcmQsIGdiMS5nYW1lYm9hcmQpXG4gICAgVUkuZGlzcGxheUJvYXJkKHBjR2FtZWJvYXJkLCBnYjIuZ2FtZWJvYXJkKVxuXG4gICAgcGwxLnR1cm4gPSBwbDEuc3dhcFR1cm4oKTtcbiAgICBcbiAgICBjb25zdCBlbmVteUZpZWxkcyA9IHBjR2FtZWJvYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZmllbGRcIik7XG4gICAgZW5lbXlGaWVsZHMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYocGwxLnR1cm4pIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVzID0gZ2IyLnJlY2VpdmVBdHRhY2soZS50YXJnZXQuZGF0YXNldC5wb3NYLCBlLnRhcmdldC5kYXRhc2V0LnBvc1kpXG4gICAgICAgICAgICAgICAgaWYocmVzWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgIFVJLnNob3dNZXNzYWdlKGBZb3Ugc2hvdCBvbiB0aGUgY29vcmRpbmF0ZXMgJHtyZXNbMV19ICR7cmVzWzJdfSBhbmQgLi4uIGhpdCFgKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIFVJLnNob3dNZXNzYWdlKGBZb3Ugc2hvdCBvbiB0aGUgY29vcmRpbmF0ZXMgJHtyZXNbMV19ICR7cmVzWzJdfSBhbmQgLi4uIG1pc3NlZC5gKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBVSS5tYXJrQm9hcmQocmVzWzBdLCByZXNbMV0sIHJlc1syXSwgZ2IyLCBlKVxuICAgICAgICAgICAgICAgIGlmKGlzR2FtZU92ZXIoKSkge1xuICAgICAgICAgICAgICAgICAgICBpZihnYjIuYWxsU2hpcHNTdW5rKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFVJLnNob3dNZXNzYWdlKFwiWW91IHdvblwiKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgVUkuc2hvd01lc3NhZ2UoXCJUaGUgUEMgd29uXCIpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBsMS5zd2FwVHVybigpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBsMS50dXJuKVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQocGNUdXJuLCAzMDAwKVxuICAgICAgICAgICAgfSAgXG4gICAgICAgIH0pXG4gICAgfSlcbiAgICAgXG4gICAgZnVuY3Rpb24gcGNUdXJuKCkge1xuICAgICAgICBpZihpc0dhbWVPdmVyKCkpIHJldHVyblxuICAgICAgICBsZXQgcmVzID0gZ2IxLnJlY2VpdmVBdHRhY2soZ2V0UmFuZG9tSW50KDkpLCBnZXRSYW5kb21JbnQoOSkpXG4gICAgICAgIGlmKHJlc1swXSkge1xuICAgICAgICAgICAgVUkuc2hvd01lc3NhZ2UoYFBDIHNob3Qgb24gdGhlIGNvb3JkaW5hdGVzICR7cmVzWzFdfSAke3Jlc1syXX0gYW5kIC4uLiBoaXQhYClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFVJLnNob3dNZXNzYWdlKGBQQyBzaG90IG9uIHRoZSBjb29yZGluYXRlcyAke3Jlc1sxXX0gJHtyZXNbMl19IGFuZCAuLi4gbWlzc2VkLmApXG4gICAgICAgIH1cbiAgICAgICAgVUkubWFya0JvYXJkKHJlc1swXSwgcmVzWzFdLCByZXNbMl0sIGdiMSwgZmFsc2UpXG4gICAgICAgIHBsMS5zd2FwVHVybigpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNHYW1lT3ZlcigpIHtcbiAgICAgICAgaWYoZ2IxLmFsbFNoaXBzU3VuaygpIHx8IGdiMi5hbGxTaGlwc1N1bmsoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGdldFJhbmRvbUludChtYXgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1heCk7XG4gICAgICB9XG5cbn0pKCk7Il0sIm5hbWVzIjpbIkdhbWVib2FyZCIsImdhbWVib2FyZCIsImkiLCJwdXNoIiwieSIsInNoaXBzIiwicGxhY2VTaGlwcyIsInBvc1giLCJwb3NZIiwibGVuZ3RoIiwiZGlyIiwic2hpcCIsImhpdHMiLCJpc1N1bmsiLCJyZWNlaXZlZFNob3RzIiwiaGl0IiwiU2hpcCIsInJlY2VpdmVBdHRhY2siLCJtaXNzZWRTaG90IiwiY29uc29sZSIsImxvZyIsImFsbFNoaXBzU3VuayIsIm1hcCIsImluY2x1ZGVzIiwiVUkiLCJpbmZvIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZGlzcGxheUJvYXJkIiwiY29udGFpbmVyIiwiZGl2IiwiY3JlYXRlRWxlbWVudCIsImRhdGFzZXQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsInRleHRDb250ZW50IiwibWFya0JvYXJkIiwiaXNIaXQiLCJib2FyZCIsImUiLCJteUZpZWxkcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJteUZpZWxkIiwiQXJyYXkiLCJmcm9tIiwiZmluZCIsImVsZW1lbnQiLCJ0YXJnZXQiLCJzaG93TWVzc2FnZSIsInRleHQiLCJQbGF5ZXIiLCJuYW1lIiwic3dhcFR1cm4iLCJ0dXJuIiwibXlHYW1lYm9hcmQiLCJwY0dhbWVib2FyZCIsImdiMSIsImdiMiIsInBsMSIsInBjVHVybiIsImlzR2FtZU92ZXIiLCJyZXMiLCJnZXRSYW5kb21JbnQiLCJtYXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldFRpbWVvdXQiXSwic291cmNlUm9vdCI6IiJ9