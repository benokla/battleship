(()=>{"use strict";const e=()=>{let e=[];for(let t=0;t<10;t++){e.push([""]);for(let o=0;o<9;o++)e[t].push("")}let t=[];return{placeShips:function(o,a,n,r){o=Number(o),a=Number(a);let s=(e=>{let t=[];for(let e=0;e<10;e++){t.push([""]);for(let o=0;o<9;o++)t[e].push("")}return{length:e,isSunk:function(){let o=0;for(let e=0;e<10;e++)for(let a=0;a<10;a++)""!=t[e][a]&&o++;return o>=e},hit:function(e,o){t[o][e]="hit"},hits:t}})(n);if(t.push(s),"h"==r){if(o+n>9)return;for(let t=0;t<n;t++){if(""!=e[a][o]){for(;t>0;)o--,e[a][o]="",t--;return}e[a][o]=s,o++}}else if("v"==r){if(a+n>9)return;for(let t=0;t<n;t++){if(""!=e[a][o]){for(;t>0;)a--,e[a][o]="",t--;return}e[a][o]=s,a++}}return!0},gameboard:e,receiveAttack:function(t,o){return""!=e[o][t]?(e[o][t].hit(t,o),[!0,t,o]):[!1,t,o]},allShipsSunk:function(){return!t.map((e=>e.isSunk())).includes(!1)}}},t=(()=>{const e=document.querySelector(".info");return{displayBoard:function(e,t){e.innerHTML="";for(let o=0;o<10;o++)for(let a=0;a<10;a++){const n=document.createElement("div");n.dataset.posX=a,n.dataset.posY=o,n.classList.add("field"),e.appendChild(n),n.textContent=""==t[o][a]?"":"X"}},markBoard:function(e,t,o,a,n){if(0==n){let a=document.querySelector(".myGameboard").querySelectorAll(".field"),n=Array.from(a).find((e=>e.dataset.posX==t&&e.dataset.posY==o));e?n.classList.add("hit"):n.classList.add("miss")}else e?n.target.classList.add("hit"):n.target.classList.add("miss")},showMessage:function(t){e.textContent=t}}})();(()=>{const o=document.querySelector(".myGameboard"),a=document.querySelector(".pcGameboard"),n=document.querySelector("#addShipBtn"),r=document.querySelector("#posXInput"),s=document.querySelector("#posYInput"),i=document.querySelector("#randomBtn"),l=document.querySelector("#orientationBtn");let d=!1,u=[3,4,5,3],c=e(),h=e();const f={swapTurn:function(){return!0},turn:!1};t.displayBoard(o,c.gameboard),t.displayBoard(a,h.gameboard),m(h),t.displayBoard(a,h.gameboard),f.turn=f.swapTurn();let p=0;function m(e){let t=0,o="";for(;t<u.length;)o=1==k(2)?"v":"h",e.placeShips(k(9),k(9),u[t],o)&&t++}function g(){h=e(),m(h),t.displayBoard(a,h.gameboard),c=e(),t.displayBoard(o,c.gameboard)}function S(){if(y())return;let e=c.receiveAttack(k(9),k(9));e[0]?t.showMessage(`PC shot on the coordinates ${e[1]} ${e[2]} and ... hit!`):t.showMessage(`PC shot on the coordinates ${e[1]} ${e[2]} and ... missed.`),t.markBoard(e[0],e[1],e[2],c,!1),f.turn=f.swapTurn()}function y(){return console.log(c.gameboard),!(!c.allShipsSunk()&&!h.allShipsSunk()||(d=!1,0))}function k(e){return Math.floor(Math.random()*e)}n.addEventListener("click",(function(){c.placeShips(r.value,s.value,u[p],l.value)&&(t.displayBoard(o,c.gameboard),p++,t.showMessage("Next ship has length of "+u[p]),p>=u.length&&(d=!0,t.showMessage("Click on the enemy board to shoot")))})),l.addEventListener("click",(function(){"Vertical"==l.textContent?(l.value="v",l.textContent="Horizontal"):"Horizontal"==l.textContent&&(l.value="h",l.textContent="Vertical")})),i.addEventListener("click",(()=>{d||(c=e(),m(c),t.displayBoard(o,c.gameboard),t.showMessage("Click on the enemy board to shoot"),d=!0)})),a.querySelectorAll(".field").forEach((e=>{e.addEventListener("click",(e=>{if(f.turn&&d){let o=h.receiveAttack(e.target.dataset.posX,e.target.dataset.posY);if(o[0]?t.showMessage(`You shot on the coordinates ${o[1]} ${o[2]} and ... hit!`):t.showMessage(`You shot on the coordinates ${o[1]} ${o[2]} and ... missed.`),t.markBoard(o[0],o[1],o[2],h,e),y()){h.allShipsSunk()?(t.showMessage("You won. Next game already started."),g()):c.allShipsSunk()&&(t.showMessage("The PC won. Next game already started."),g());let e=0,o="";for(;e<u.length;)o=1==k(2)?"v":"h",h.placeShips(k(9),k(9),u[e],o)&&e++;return}f.turn=!1,setTimeout(S,2e3)}}))}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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d2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZWJvYXJkRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL1VJLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9wbGF5ZXJGYWN0b3J5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFNoaXAgPSAobGVuZ3RoKSA9PiB7XG5cbiAgICBsZXQgaGl0cyA9IFtdO1xuICAgIC8vIFtbXCJcIiwgXCJcIiwgXCJcIiwgLi4uLl0sIFtcIlwiLCBcIlwiLCBcIlwiLCAuLi4uXSwgLi4uIFtcIlwiLCBcIlwiLCBcIlwiLCAuLi4uXSBdXG4gICAgZm9yKGxldCBpID0gMDsgaTwxMDsgaSsrKSB7XG4gICAgICAgIGhpdHMucHVzaChbXCJcIl0pXG4gICAgICAgIGZvcihsZXQgeSA9IDA7IHk8OTsgeSsrKSB7XG4gICAgICAgICAgICBoaXRzW2ldLnB1c2goXCJcIilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzU3VuaygpIHtcbiAgICAgICAgbGV0IHJlY2VpdmVkU2hvdHMgPSAwO1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpPDEwOyBpKyspe1xuICAgICAgICAgICAgZm9yKGxldCB5ID0gMDsgeTwxMDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgaWYoaGl0c1tpXVt5XSAhPSBcIlwiKSByZWNlaXZlZFNob3RzKytcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZihyZWNlaXZlZFNob3RzID49IGxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoaXQocG9zWCwgcG9zWSkge1xuICAgICAgICBoaXRzW3Bvc1ldW3Bvc1hdID0gXCJoaXRcIjtcbiAgICB9XG5cbiAgICByZXR1cm4geyBsZW5ndGgsIGlzU3VuaywgaGl0LCBoaXRzfVxufTtcblxuXG5cbmV4cG9ydCB7IFNoaXAgfSIsImltcG9ydCB7IFNoaXAgfSBmcm9tIFwiLi9zaGlwRmFjdG9yeVwiO1xuXG5jb25zdCBHYW1lYm9hcmQgPSAoKSA9PiB7XG5cbiAgICBsZXQgZ2FtZWJvYXJkID0gW107XG4gICAgLy8gW1tcIlwiLCBcIlwiLCBcIlwiLCAuLi4uXSwgW1wiXCIsIFwiXCIsIFwiXCIsIC4uLi5dLCAuLi4gW1wiXCIsIFwiXCIsIFwiXCIsIC4uLi5dXVxuICAgIGZvcihsZXQgaSA9IDA7IGk8MTA7IGkrKykge1xuICAgICAgICBnYW1lYm9hcmQucHVzaChbXCJcIl0pXG4gICAgICAgIGZvcihsZXQgeSA9IDA7IHk8OTsgeSsrKSB7XG4gICAgICAgICAgICBnYW1lYm9hcmRbaV0ucHVzaChcIlwiKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHNoaXBzID0gW107XG4gICBcbiAgICBmdW5jdGlvbiBwbGFjZVNoaXBzKHBvc1gsIHBvc1ksIGxlbmd0aCwgZGlyKSB7XG4gICAgICAgIHBvc1ggPSBOdW1iZXIocG9zWClcbiAgICAgICAgcG9zWSA9IE51bWJlcihwb3NZKVxuICAgICAgICBsZXQgc2hpcCA9IFNoaXAobGVuZ3RoKVxuICAgICAgICBzaGlwcy5wdXNoKHNoaXApXG4gICAgICAgIFxuICAgICAgICAvL2hvcml6b250YWxcbiAgICAgICAgaWYoZGlyID09IFwiaFwiKSB7XG4gICAgICAgICAgICBpZihwb3NYK2xlbmd0aCA+IDkpIHJldHVybjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaTxsZW5ndGg7IGkrKykgeyBcbiAgICAgICAgICAgICAgICBpZihnYW1lYm9hcmRbcG9zWV1bcG9zWF0gIT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICB3aGlsZShpPjApe1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zWC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkW3Bvc1ldW3Bvc1hdID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGktLVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkW3Bvc1ldW3Bvc1hdID0gc2hpcDtcbiAgICAgICAgICAgICAgICBwb3NYKys7XG4gICAgICAgICAgICB9ICBcbiAgICAgICAgfSBcbiAgICAgICAgLy92ZXJ0aWNhbCBcbiAgICAgICAgZWxzZSBpZihkaXIgPT0gXCJ2XCIpIHtcbiAgICAgICAgICAgIGlmKHBvc1krbGVuZ3RoID4gOSkgcmV0dXJuO1xuXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpPGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYoZ2FtZWJvYXJkW3Bvc1ldW3Bvc1hdICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUoaT4wKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc1ktLTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZFtwb3NZXVtwb3NYXSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpLS1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdhbWVib2FyZFtwb3NZXVtwb3NYXSA9IHNoaXA7XG4gICAgICAgICAgICAgICAgcG9zWSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlY2VpdmVBdHRhY2socG9zWCwgcG9zWSkge1xuICAgICAgICBpZihnYW1lYm9hcmRbcG9zWV1bcG9zWF0gIT0gXCJcIikge1xuICAgICAgICAgICAgZ2FtZWJvYXJkW3Bvc1ldW3Bvc1hdLmhpdChwb3NYLCBwb3NZKVxuICAgICAgICAgICAgcmV0dXJuIFt0cnVlLCBwb3NYLCBwb3NZXVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFtmYWxzZSwgcG9zWCwgcG9zWV0gICAgXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhbGxTaGlwc1N1bmsoKSB7XG4gICAgICAgIGxldCBzaGlwc1N1bmsgPSBzaGlwcy5tYXAoKHNoaXApID0+IHNoaXAuaXNTdW5rKCkgKVxuICAgICAgICBcbiAgICAgICAgaWYoc2hpcHNTdW5rLmluY2x1ZGVzKGZhbHNlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBwbGFjZVNoaXBzLCBnYW1lYm9hcmQsIHJlY2VpdmVBdHRhY2ssIGFsbFNoaXBzU3VuayB9XG59XG5cbmV4cG9ydCB7IEdhbWVib2FyZH0iLCJjb25zdCBVSSA9ICgoKSA9PiB7XG5cbiAgICBjb25zdCBpbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbmZvXCIpXG5cbiAgICBmdW5jdGlvbiBkaXNwbGF5Qm9hcmQoY29udGFpbmVyLCBnYW1lYm9hcmQpIHtcbiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGk8MTA7IGkrKykge1xuICAgICAgICAgICAgZm9yKGxldCB5ID0gMDsgeTwxMDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBkaXYuZGF0YXNldC5wb3NYID0geTtcbiAgICAgICAgICAgICAgICBkaXYuZGF0YXNldC5wb3NZID0gaTtcbiAgICAgICAgICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZChcImZpZWxkXCIpO1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkaXYpXG4gICAgICAgICAgICAgICAgZGl2LnRleHRDb250ZW50ID0gZGlzcGxheVNoaXBzKGdhbWVib2FyZFtpXVt5XSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRpc3BsYXlTaGlwcyhlbGVtZW50KSB7XG4gICAgICAgICAgICBpZihlbGVtZW50ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIlxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJYXCJcbiAgICAgICAgICAgIH0gIFxuICAgICAgICB9XG5cbiAgICBmdW5jdGlvbiBtYXJrQm9hcmQoaXNIaXQsIHBvc1gsIHBvc1ksIGJvYXJkLCBlKSB7XG4gICAgICAgIGlmKGUgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGxldCBnYW1lYm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm15R2FtZWJvYXJkXCIpO1xuICAgICAgICAgICAgbGV0IG15RmllbGRzID0gZ2FtZWJvYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZmllbGRcIilcbiAgICAgICAgICAgIGxldCBteUZpZWxkc0FyciA9IEFycmF5LmZyb20obXlGaWVsZHMpXG4gICAgICAgICAgICBsZXQgbXlGaWVsZCA9IG15RmllbGRzQXJyLmZpbmQoZWxlbWVudCA9PiBlbGVtZW50LmRhdGFzZXQucG9zWCA9PSBwb3NYICYmIGVsZW1lbnQuZGF0YXNldC5wb3NZID09IHBvc1kpXG4gICAgICAgICAgICBpZihpc0hpdCkge1xuICAgICAgICAgICAgICAgIG15RmllbGQuY2xhc3NMaXN0LmFkZChcImhpdFwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbXlGaWVsZC5jbGFzc0xpc3QuYWRkKFwibWlzc1wiKTtcbiAgICAgICAgICAgIH0gICAgICAgICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmKGlzSGl0KSB7XG4gICAgICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZChcImhpdFwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZChcIm1pc3NcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG93TWVzc2FnZSh0ZXh0KSB7XG4gICAgICAgIGluZm8udGV4dENvbnRlbnQgPSB0ZXh0O1xuICAgIH1cblxuXG4gICAgcmV0dXJuIHtkaXNwbGF5Qm9hcmQsIG1hcmtCb2FyZCwgc2hvd01lc3NhZ2V9XG5cbn0pKCk7XG5cbmV4cG9ydCB7IFVJIH0iLCJpbXBvcnQgeyBHYW1lYm9hcmQgfSBmcm9tIFwiLi9nYW1lYm9hcmRGYWN0b3J5XCI7XG5pbXBvcnQgeyBVSSB9IGZyb20gXCIuL1VJXCI7XG5pbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi9wbGF5ZXJGYWN0b3J5XCI7XG5cbmNvbnN0IGdhbWUgPSAoKCkgPT4ge1xuICAgIGNvbnN0IG15R2FtZWJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5teUdhbWVib2FyZFwiKVxuICAgIGNvbnN0IHBjR2FtZWJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wY0dhbWVib2FyZFwiKVxuICAgIGNvbnN0IGFkZFNoaXBCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZFNoaXBCdG5cIilcbiAgICBjb25zdCBwb3NYSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Bvc1hJbnB1dFwiKVxuICAgIGNvbnN0IHBvc1lJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9zWUlucHV0XCIpXG4gICAgY29uc3QgcmFuZG9tQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNyYW5kb21CdG5cIilcbiAgICBjb25zdCBvcmllbnRhdGlvbkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3JpZW50YXRpb25CdG5cIilcblxuICAgIGxldCBzdGFydCA9IGZhbHNlO1xuICAgIGxldCBzaGlwc0xlbmd0aCA9IFszLCA0LCA1LCAzXVxuICAgIFxuICAgIGxldCBnYjEgPSBHYW1lYm9hcmQoKTtcbiAgICBsZXQgZ2IyID0gR2FtZWJvYXJkKCk7XG4gICAgY29uc3QgcGwxID0gUGxheWVyKClcbiAgICBjb25zdCBwbDIgPSBQbGF5ZXIoKVxuXG4gICAgVUkuZGlzcGxheUJvYXJkKG15R2FtZWJvYXJkLCBnYjEuZ2FtZWJvYXJkKVxuICAgIFVJLmRpc3BsYXlCb2FyZChwY0dhbWVib2FyZCwgZ2IyLmdhbWVib2FyZClcbiAgICAvLyBpbml0IGVuZW15IGJvYXJkXG4gICAgYWRkUmFuZG9tU2hpcHMoZ2IyKVxuICAgIFVJLmRpc3BsYXlCb2FyZChwY0dhbWVib2FyZCwgZ2IyLmdhbWVib2FyZClcblxuICAgIHBsMS50dXJuID0gcGwxLnN3YXBUdXJuKCk7XG5cbiAgICBsZXQgaSA9IDA7XG4gICAgYWRkU2hpcEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYWRkU2hpcCk7XG4gICAgb3JpZW50YXRpb25CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNoYW5nZU9yaWVudGF0aW9uKVxuXG4gICAgZnVuY3Rpb24gYWRkU2hpcCgpIHtcbiAgICAgICAgaWYoZ2IxLnBsYWNlU2hpcHMocG9zWElucHV0LnZhbHVlLCBwb3NZSW5wdXQudmFsdWUsIHNoaXBzTGVuZ3RoW2ldLCBvcmllbnRhdGlvbkJ0bi52YWx1ZSkpIHtcbiAgICAgICAgICAgIFVJLmRpc3BsYXlCb2FyZChteUdhbWVib2FyZCwgZ2IxLmdhbWVib2FyZClcbiAgICAgICAgICAgIGkrKzsgXG4gICAgICAgICAgICBVSS5zaG93TWVzc2FnZShcIk5leHQgc2hpcCBoYXMgbGVuZ3RoIG9mIFwiICsgc2hpcHNMZW5ndGhbaV0pXG4gICAgICAgICAgICBpZihpPj1zaGlwc0xlbmd0aC5sZW5ndGgpe1xuICAgICAgICAgICAgICAgIHN0YXJ0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBVSS5zaG93TWVzc2FnZShcIkNsaWNrIG9uIHRoZSBlbmVteSBib2FyZCB0byBzaG9vdFwiKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjaGFuZ2VPcmllbnRhdGlvbigpIHtcbiAgICAgICAgaWYob3JpZW50YXRpb25CdG4udGV4dENvbnRlbnQgPT0gXCJWZXJ0aWNhbFwiKSB7XG4gICAgICAgICAgICBvcmllbnRhdGlvbkJ0bi52YWx1ZSA9IFwidlwiO1xuICAgICAgICAgICAgb3JpZW50YXRpb25CdG4udGV4dENvbnRlbnQgPSBcIkhvcml6b250YWxcIlxuICAgICAgICB9IGVsc2UgaWYob3JpZW50YXRpb25CdG4udGV4dENvbnRlbnQgPT0gXCJIb3Jpem9udGFsXCIpIHtcbiAgICAgICAgICAgIG9yaWVudGF0aW9uQnRuLnZhbHVlID0gXCJoXCI7XG4gICAgICAgICAgICBvcmllbnRhdGlvbkJ0bi50ZXh0Q29udGVudCA9IFwiVmVydGljYWxcIlxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmFuZG9tQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGlmKCFzdGFydCkge1xuICAgICAgICAgICAgZ2IxID0gR2FtZWJvYXJkKCk7XG4gICAgICAgICAgICBhZGRSYW5kb21TaGlwcyhnYjEpXG4gICAgICAgICAgICBVSS5kaXNwbGF5Qm9hcmQobXlHYW1lYm9hcmQsIGdiMS5nYW1lYm9hcmQpXG4gICAgICAgICAgICBVSS5zaG93TWVzc2FnZShcIkNsaWNrIG9uIHRoZSBlbmVteSBib2FyZCB0byBzaG9vdFwiKVxuICAgICAgICAgICAgc3RhcnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIGFkZFJhbmRvbVNoaXBzKGdiKSB7XG4gICAgICAgIGxldCB5ID0gMDtcbiAgICAgICAgbGV0IGRpciA9IFwiXCI7XG4gICAgICAgIHdoaWxlKHk8c2hpcHNMZW5ndGgubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZihnZXRSYW5kb21JbnQoMikgPT0gMSkge1xuICAgICAgICAgICAgICAgIGRpciA9IFwidlwiXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRpciA9IFwiaFwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihnYi5wbGFjZVNoaXBzKGdldFJhbmRvbUludCg5KSwgZ2V0UmFuZG9tSW50KDkpLCBzaGlwc0xlbmd0aFt5XSwgZGlyKSl7XG4gICAgICAgICAgICAgICAgeSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGVuZW15RmllbGRzID0gcGNHYW1lYm9hcmQucXVlcnlTZWxlY3RvckFsbChcIi5maWVsZFwiKTtcbiAgICBlbmVteUZpZWxkcy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihwbDEudHVybiAmJiBzdGFydCkge1xuICAgICAgICAgICAgICAgIGxldCByZXMgPSBnYjIucmVjZWl2ZUF0dGFjayhlLnRhcmdldC5kYXRhc2V0LnBvc1gsIGUudGFyZ2V0LmRhdGFzZXQucG9zWSlcbiAgICAgICAgICAgICAgICBpZihyZXNbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgVUkuc2hvd01lc3NhZ2UoYFlvdSBzaG90IG9uIHRoZSBjb29yZGluYXRlcyAke3Jlc1sxXX0gJHtyZXNbMl19IGFuZCAuLi4gaGl0IWApXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgVUkuc2hvd01lc3NhZ2UoYFlvdSBzaG90IG9uIHRoZSBjb29yZGluYXRlcyAke3Jlc1sxXX0gJHtyZXNbMl19IGFuZCAuLi4gbWlzc2VkLmApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFVJLm1hcmtCb2FyZChyZXNbMF0sIHJlc1sxXSwgcmVzWzJdLCBnYjIsIGUpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYoaXNHYW1lT3ZlcigpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGdiMi5hbGxTaGlwc1N1bmsoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgVUkuc2hvd01lc3NhZ2UoXCJZb3Ugd29uLiBOZXh0IGdhbWUgYWxyZWFkeSBzdGFydGVkLlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3R2FtZSgpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihnYjEuYWxsU2hpcHNTdW5rKCkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBVSS5zaG93TWVzc2FnZShcIlRoZSBQQyB3b24uIE5leHQgZ2FtZSBhbHJlYWR5IHN0YXJ0ZWQuXCIpICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0dhbWUoKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCB5ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRpciA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlKHk8c2hpcHNMZW5ndGgubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihnZXRSYW5kb21JbnQoMikgPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpciA9IFwidlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpciA9IFwiaFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihnYjIucGxhY2VTaGlwcyhnZXRSYW5kb21JbnQoOSksIGdldFJhbmRvbUludCg5KSwgc2hpcHNMZW5ndGhbeV0sIGRpcikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGwxLnR1cm4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHBjVHVybiwgMjAwMClcbiAgICAgICAgICAgIH0gIFxuICAgICAgICB9KVxuICAgIH0pXG4gICAgIFxuXG4gICAgZnVuY3Rpb24gbmV3R2FtZSgpIHtcbiAgICAgICAvLyBpbml0IGVuZW15IGJvYXJkXG4gICAgICAgZ2IyID0gR2FtZWJvYXJkKCk7XG4gICAgICAgYWRkUmFuZG9tU2hpcHMoZ2IyKVxuICAgICAgIFVJLmRpc3BsYXlCb2FyZChwY0dhbWVib2FyZCwgZ2IyLmdhbWVib2FyZCkgXG4gICAgICAgZ2IxID0gR2FtZWJvYXJkKCk7XG4gICAgICAgVUkuZGlzcGxheUJvYXJkKG15R2FtZWJvYXJkLCBnYjEuZ2FtZWJvYXJkKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBjVHVybigpIHtcbiAgICAgICAgaWYoaXNHYW1lT3ZlcigpKSByZXR1cm5cbiAgICAgICAgbGV0IHJlcyA9IGdiMS5yZWNlaXZlQXR0YWNrKGdldFJhbmRvbUludCg5KSwgZ2V0UmFuZG9tSW50KDkpKVxuICAgICAgICBpZihyZXNbMF0pIHtcbiAgICAgICAgICAgIFVJLnNob3dNZXNzYWdlKGBQQyBzaG90IG9uIHRoZSBjb29yZGluYXRlcyAke3Jlc1sxXX0gJHtyZXNbMl19IGFuZCAuLi4gaGl0IWApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBVSS5zaG93TWVzc2FnZShgUEMgc2hvdCBvbiB0aGUgY29vcmRpbmF0ZXMgJHtyZXNbMV19ICR7cmVzWzJdfSBhbmQgLi4uIG1pc3NlZC5gKVxuICAgICAgICB9XG4gICAgICAgIFVJLm1hcmtCb2FyZChyZXNbMF0sIHJlc1sxXSwgcmVzWzJdLCBnYjEsIGZhbHNlKVxuICAgICAgICBwbDEudHVybiA9IHBsMS5zd2FwVHVybigpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzR2FtZU92ZXIoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGdiMS5nYW1lYm9hcmQpXG4gICAgICAgIGlmKGdiMS5hbGxTaGlwc1N1bmsoKSB8fCBnYjIuYWxsU2hpcHNTdW5rKCkpIHtcbiAgICAgICAgICAgIHN0YXJ0ID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gZ2V0UmFuZG9tSW50KG1heCkge1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbWF4KTtcbiAgICAgIH1cblxufSkoKTsiLCJjb25zdCBQbGF5ZXIgPSAoKSA9PiB7XG5cbiAgICBsZXQgdHVybiA9IGZhbHNlO1xuXG4gICAgZnVuY3Rpb24gc3dhcFR1cm4oKSB7XG4gICAgICAgIGlmKHR1cm4gPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7c3dhcFR1cm4sIHR1cm4gfVxuXG59XG5cbmV4cG9ydCB7IFBsYXllciB9Il0sIm5hbWVzIjpbIkdhbWVib2FyZCIsImdhbWVib2FyZCIsImkiLCJwdXNoIiwieSIsInNoaXBzIiwicGxhY2VTaGlwcyIsInBvc1giLCJwb3NZIiwibGVuZ3RoIiwiZGlyIiwiTnVtYmVyIiwic2hpcCIsImhpdHMiLCJpc1N1bmsiLCJyZWNlaXZlZFNob3RzIiwiaGl0IiwiU2hpcCIsInJlY2VpdmVBdHRhY2siLCJhbGxTaGlwc1N1bmsiLCJtYXAiLCJpbmNsdWRlcyIsIlVJIiwiaW5mbyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImRpc3BsYXlCb2FyZCIsImNvbnRhaW5lciIsImlubmVySFRNTCIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJkYXRhc2V0IiwiY2xhc3NMaXN0IiwiYWRkIiwiYXBwZW5kQ2hpbGQiLCJ0ZXh0Q29udGVudCIsIm1hcmtCb2FyZCIsImlzSGl0IiwiYm9hcmQiLCJlIiwibXlGaWVsZHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibXlGaWVsZCIsIkFycmF5IiwiZnJvbSIsImZpbmQiLCJlbGVtZW50IiwidGFyZ2V0Iiwic2hvd01lc3NhZ2UiLCJ0ZXh0IiwibXlHYW1lYm9hcmQiLCJwY0dhbWVib2FyZCIsImFkZFNoaXBCdG4iLCJwb3NYSW5wdXQiLCJwb3NZSW5wdXQiLCJyYW5kb21CdG4iLCJvcmllbnRhdGlvbkJ0biIsInN0YXJ0Iiwic2hpcHNMZW5ndGgiLCJnYjEiLCJnYjIiLCJwbDEiLCJzd2FwVHVybiIsInR1cm4iLCJhZGRSYW5kb21TaGlwcyIsImdiIiwiZ2V0UmFuZG9tSW50IiwibmV3R2FtZSIsInBjVHVybiIsImlzR2FtZU92ZXIiLCJyZXMiLCJjb25zb2xlIiwibG9nIiwibWF4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYWRkRXZlbnRMaXN0ZW5lciIsInZhbHVlIiwiZm9yRWFjaCIsInNldFRpbWVvdXQiXSwic291cmNlUm9vdCI6IiJ9