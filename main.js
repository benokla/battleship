(()=>{"use strict";const e=()=>{let e=[];for(let t=0;t<10;t++){e.push([""]);for(let r=0;r<9;r++)e[t].push("")}let t=[];return{placeShips:function(r,o,n,a){console.log(r,o,n,a),r=Number(r),o=Number(o);let l=(e=>{let t=[];for(let e=0;e<10;e++){t.push([""]);for(let r=0;r<10;r++)t[e].push("")}return{length:e,isSunk:function(){let r=0;for(let e=0;e<10;e++)for(let o=0;o<10;o++)""!=t[e][o]&&r++;return r>=e},hit:function(e,r){t[r][e]="hit"},hits:t}})(n);if(t.push(l),"h"==a){if(r+n>9)return;for(let t=0;t<n;t++){if(""!=e[o][r]){for(;t>0;)r--,e[o][r]="",t--;return}e[o][r]=l,r++}}else if("v"==a){if(o+n>9)return;for(let t=0;t<n;t++){if(""!=e[o][r]){for(;t>0;)o--,e[o][r]="",t--;return}e[o][r]=l,o++}}return!0},gameboard:e,receiveAttack:function(t,r){return""!=e[r][t]?(e[r][t].hit(t,r),[!0,t,r]):[!1,t,r]},allShipsSunk:function(){return!t.map((e=>e.isSunk())).includes(!1)}}},t=(()=>{const e=document.querySelector(".info");return{displayBoard:function(e,t){e.innerHTML="";for(let r=0;r<10;r++)for(let o=0;o<10;o++){const n=document.createElement("div");n.dataset.posX=o,n.dataset.posY=r,n.classList.add("field"),e.appendChild(n),n.textContent=""==t[r][o]?"":"X"}},markBoard:function(e,t,r,o,n){if(0==n){let o=document.querySelector(".myGameboard").querySelectorAll(".field"),n=Array.from(o).find((e=>e.dataset.posX==t&&e.dataset.posY==r));e?n.classList.add("hit"):n.classList.add("miss")}else e?n.target.classList.add("hit"):n.target.classList.add("miss")},showMessage:function(t){e.textContent=t}}})(),r=e=>({name:e,swapTurn:function(){return!0},turn:!1});(()=>{const o=document.querySelector(".myGameboard"),n=document.querySelector(".pcGameboard"),a=document.querySelector("#addShipBtn"),l=document.querySelector("#posXInput"),s=document.querySelector("#posYInput");let u=[3,4,5,3];const i=e(),d=e(),c=r("Jakob");r("PC"),t.displayBoard(o,i.gameboard),t.displayBoard(n,d.gameboard),c.turn=c.swapTurn();let f=o.querySelectorAll(".field");console.log(f);let p=0;a.addEventListener("click",(e=>{i.placeShips(l.value,s.value,u[p],"h")&&(t.displayBoard(o,i.gameboard),p++)}));let m=0,h="";for(;m<u.length;)h=1==y(2)?"v":"h",d.placeShips(y(9),y(9),u[m],h)&&m++;function y(e){return Math.floor(Math.random()*e)}t.displayBoard(n,d.gameboard),n.querySelectorAll(".field").forEach((e=>{e.addEventListener("click",(e=>{c.turn}))}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBT0wsRUFBWTNELEdBQUksT0FDaEVzQixFQUFHSSxhQUFhNEIsRUFBYU0sRUFBSTdELFdBQ2pDQyxRQVFSLElBQUlFLEVBQUksRUFDSk0sRUFBTSxHQUNWLEtBQU1OLEVBQUV5RCxFQUFZcEQsUUFFWkMsRUFEa0IsR0FBbkJ5RCxFQUFhLEdBQ04sSUFFQSxJQUVQSixFQUFJekQsV0FBVzZELEVBQWEsR0FBSUEsRUFBYSxHQUFJTixFQUFZekQsR0FBSU0sSUFDaEVOLElBdURSLFNBQVMrRCxFQUFhQyxHQUNsQixPQUFPQyxLQUFLQyxNQUFNRCxLQUFLRSxTQUFXSCxHQXBEdEM1QyxFQUFHSSxhQUFhNkIsRUFBYU0sRUFBSTlELFdBRWJ3RCxFQUFZZCxpQkFBaUIsVUFDckM2QixTQUFReEIsSUFDaEJBLEVBQVFpQixpQkFBaUIsU0FBVXhCLElBRTVCdUIsRUFBSVQsWUFyRE4sSSIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvc2hpcEZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9nYW1lYm9hcmRGYWN0b3J5LmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvVUkuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9wbGF5ZXJGYWN0b3J5LmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgU2hpcCA9IChsZW5ndGgpID0+IHtcblxuICAgIGxldCBoaXRzID0gW107XG4gICAgLy8gW1tcIlwiLCBcIlwiLCBcIlwiLCAuLi4uXSwgW1wiXCIsIFwiXCIsIFwiXCIsIC4uLi5dLCAuLi4gW1wiXCIsIFwiXCIsIFwiXCIsIC4uLi5dIF1cbiAgICBmb3IobGV0IGkgPSAwOyBpPDEwOyBpKyspIHtcbiAgICAgICAgaGl0cy5wdXNoKFtcIlwiXSlcbiAgICAgICAgZm9yKGxldCB5ID0gMDsgeTwxMDsgeSsrKSB7XG4gICAgICAgICAgICBoaXRzW2ldLnB1c2goXCJcIilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzU3VuaygpIHtcbiAgICAgICAgbGV0IHJlY2VpdmVkU2hvdHMgPSAwO1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpPDEwOyBpKyspe1xuICAgICAgICAgICAgZm9yKGxldCB5ID0gMDsgeTwxMDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgaWYoaGl0c1tpXVt5XSAhPSBcIlwiKSByZWNlaXZlZFNob3RzKytcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZihyZWNlaXZlZFNob3RzID49IGxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoaXQocG9zWCwgcG9zWSkge1xuICAgICAgICBoaXRzW3Bvc1ldW3Bvc1hdID0gXCJoaXRcIjtcbiAgICB9XG5cbiAgICByZXR1cm4geyBsZW5ndGgsIGlzU3VuaywgaGl0LCBoaXRzfVxufTtcblxuXG5cbmV4cG9ydCB7IFNoaXAgfSIsImltcG9ydCB7IFNoaXAgfSBmcm9tIFwiLi9zaGlwRmFjdG9yeVwiO1xuXG5jb25zdCBHYW1lYm9hcmQgPSAoKSA9PiB7XG5cbiAgICBsZXQgZ2FtZWJvYXJkID0gW107XG4gICAgLy8gW1tcIlwiLCBcIlwiLCBcIlwiLCAuLi4uXSwgW1wiXCIsIFwiXCIsIFwiXCIsIC4uLi5dLCAuLi4gW1wiXCIsIFwiXCIsIFwiXCIsIC4uLi5dXVxuICAgIGZvcihsZXQgaSA9IDA7IGk8MTA7IGkrKykge1xuICAgICAgICBnYW1lYm9hcmQucHVzaChbXCJcIl0pXG4gICAgICAgIGZvcihsZXQgeSA9IDA7IHk8OTsgeSsrKSB7XG4gICAgICAgICAgICBnYW1lYm9hcmRbaV0ucHVzaChcIlwiKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHNoaXBzID0gW107XG4gICBcbiAgICBmdW5jdGlvbiBwbGFjZVNoaXBzKHBvc1gsIHBvc1ksIGxlbmd0aCwgZGlyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHBvc1gsIHBvc1ksIGxlbmd0aCwgZGlyKVxuICAgICAgICBwb3NYID0gTnVtYmVyKHBvc1gpXG4gICAgICAgIHBvc1kgPSBOdW1iZXIocG9zWSlcbiAgICAgICAgbGV0IHNoaXAgPSBTaGlwKGxlbmd0aClcbiAgICAgICAgc2hpcHMucHVzaChzaGlwKVxuICAgICAgICBcbiAgICAgICAgLy9ob3Jpem9udGFsXG4gICAgICAgIGlmKGRpciA9PSBcImhcIikge1xuICAgICAgICAgICAgaWYocG9zWCtsZW5ndGggPiA5KSByZXR1cm47XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGk8bGVuZ3RoOyBpKyspIHsgXG4gICAgICAgICAgICAgICAgaWYoZ2FtZWJvYXJkW3Bvc1ldW3Bvc1hdICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUoaT4wKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc1gtLTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZFtwb3NZXVtwb3NYXSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpLS1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdhbWVib2FyZFtwb3NZXVtwb3NYXSA9IHNoaXA7XG4gICAgICAgICAgICAgICAgcG9zWCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0gZWxzZSBpZihkaXIgPT0gXCJ2XCIpIHtcbiAgICAgICAgICAgIGlmKHBvc1krbGVuZ3RoID4gOSkgcmV0dXJuO1xuXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpPGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYoZ2FtZWJvYXJkW3Bvc1ldW3Bvc1hdICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUoaT4wKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc1ktLTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZFtwb3NZXVtwb3NYXSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpLS1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdhbWVib2FyZFtwb3NZXVtwb3NYXSA9IHNoaXA7XG4gICAgICAgICAgICAgICAgcG9zWSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlY2VpdmVBdHRhY2socG9zWCwgcG9zWSkge1xuICAgICAgICBpZihnYW1lYm9hcmRbcG9zWV1bcG9zWF0gIT0gXCJcIikge1xuICAgICAgICAgICAgZ2FtZWJvYXJkW3Bvc1ldW3Bvc1hdLmhpdChwb3NYLCBwb3NZKVxuICAgICAgICAgICAgcmV0dXJuIFt0cnVlLCBwb3NYLCBwb3NZXVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFtmYWxzZSwgcG9zWCwgcG9zWV0gICAgXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhbGxTaGlwc1N1bmsoKSB7XG4gICAgICAgIGxldCBzaGlwc1N1bmsgPSBzaGlwcy5tYXAoKHNoaXApID0+IHNoaXAuaXNTdW5rKCkgKVxuICAgICAgICBcbiAgICAgICAgaWYoc2hpcHNTdW5rLmluY2x1ZGVzKGZhbHNlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBwbGFjZVNoaXBzLCBnYW1lYm9hcmQsIHJlY2VpdmVBdHRhY2ssIGFsbFNoaXBzU3VuayB9XG59XG5cbmV4cG9ydCB7IEdhbWVib2FyZH0iLCJjb25zdCBVSSA9ICgoKSA9PiB7XG5cbiAgICBjb25zdCBpbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbmZvXCIpXG5cblxuICAgIGZ1bmN0aW9uIGRpc3BsYXlCb2FyZChjb250YWluZXIsIGdhbWVib2FyZCkge1xuICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaTwxMDsgaSsrKSB7XG4gICAgICAgICAgICBmb3IobGV0IHkgPSAwOyB5PDEwOyB5KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIGRpdi5kYXRhc2V0LnBvc1ggPSB5O1xuICAgICAgICAgICAgICAgIGRpdi5kYXRhc2V0LnBvc1kgPSBpO1xuICAgICAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKFwiZmllbGRcIik7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGRpdilcbiAgICAgICAgICAgICAgICBkaXYudGV4dENvbnRlbnQgPSBkaXNwbGF5U2hpcHMoZ2FtZWJvYXJkW2ldW3ldKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlzcGxheVNoaXBzKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmKGVsZW1lbnQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIlhcIlxuICAgICAgICAgICAgfSAgXG4gICAgICAgIH1cblxuICAgIGZ1bmN0aW9uIG1hcmtCb2FyZChpc0hpdCwgcG9zWCwgcG9zWSwgYm9hcmQsIGUpIHtcbiAgICAgICAgaWYoZSA9PSBmYWxzZSkge1xuICAgICAgICAgICAgbGV0IGdhbWVib2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubXlHYW1lYm9hcmRcIik7XG4gICAgICAgICAgICBsZXQgbXlGaWVsZHMgPSBnYW1lYm9hcmQucXVlcnlTZWxlY3RvckFsbChcIi5maWVsZFwiKVxuICAgICAgICAgICAgbGV0IG15RmllbGRzQXJyID0gQXJyYXkuZnJvbShteUZpZWxkcylcbiAgICAgICAgICAgIGxldCBteUZpZWxkID0gbXlGaWVsZHNBcnIuZmluZChlbGVtZW50ID0+IGVsZW1lbnQuZGF0YXNldC5wb3NYID09IHBvc1ggJiYgZWxlbWVudC5kYXRhc2V0LnBvc1kgPT0gcG9zWSlcbiAgICAgICAgICAgIGlmKGlzSGl0KSB7XG4gICAgICAgICAgICAgICAgbXlGaWVsZC5jbGFzc0xpc3QuYWRkKFwiaGl0XCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBteUZpZWxkLmNsYXNzTGlzdC5hZGQoXCJtaXNzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZihpc0hpdCkge1xuICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaXRcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJtaXNzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2hvd01lc3NhZ2UodGV4dCkge1xuICAgICAgICBpbmZvLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICB9XG5cblxuICAgIHJldHVybiB7ZGlzcGxheUJvYXJkLCBtYXJrQm9hcmQsIHNob3dNZXNzYWdlfVxuXG59KSgpO1xuXG5leHBvcnQgeyBVSSB9IiwiY29uc3QgUGxheWVyID0gKG5hbWUpID0+IHtcblxuICAgIGxldCB0dXJuID0gZmFsc2U7XG5cbiAgICBmdW5jdGlvbiBzd2FwVHVybigpIHtcbiAgICAgICAgaWYodHVybiA9PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHsgbmFtZSwgc3dhcFR1cm4sIHR1cm4gfVxuXG59XG5cbmV4cG9ydCB7IFBsYXllciB9IiwiaW1wb3J0IHsgU2hpcCB9IGZyb20gXCIuL3NoaXBGYWN0b3J5XCI7XG5pbXBvcnQgeyBHYW1lYm9hcmQgfSBmcm9tIFwiLi9nYW1lYm9hcmRGYWN0b3J5XCI7XG5pbXBvcnQgeyBVSSB9IGZyb20gXCIuL1VJXCI7XG5pbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi9wbGF5ZXJGYWN0b3J5XCI7XG5cbmNvbnN0IGdhbWUgPSAoKCkgPT4ge1xuICAgIGNvbnN0IG15R2FtZWJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5teUdhbWVib2FyZFwiKVxuICAgIGNvbnN0IHBjR2FtZWJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wY0dhbWVib2FyZFwiKVxuICAgIGNvbnN0IGFkZFNoaXBCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZFNoaXBCdG5cIilcbiAgICBjb25zdCBwb3NYSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Bvc1hJbnB1dFwiKVxuICAgIGNvbnN0IHBvc1lJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9zWUlucHV0XCIpXG5cbiAgICBsZXQgc3RhcnQgPSBmYWxzZTtcbiAgICBsZXQgc2hpcHNMZW5ndGggPSBbMywgNCwgNSwgM11cbiAgICBcbiAgICBjb25zdCBnYjEgPSBHYW1lYm9hcmQoKTtcbiAgICBjb25zdCBnYjIgPSBHYW1lYm9hcmQoKTtcbiAgICBjb25zdCBwbDEgPSBQbGF5ZXIoXCJKYWtvYlwiKVxuICAgIGNvbnN0IHBsMiA9IFBsYXllcihcIlBDXCIpXG5cbiAgICBVSS5kaXNwbGF5Qm9hcmQobXlHYW1lYm9hcmQsIGdiMS5nYW1lYm9hcmQpXG4gICAgVUkuZGlzcGxheUJvYXJkKHBjR2FtZWJvYXJkLCBnYjIuZ2FtZWJvYXJkKVxuXG4gICAgcGwxLnR1cm4gPSBwbDEuc3dhcFR1cm4oKTtcblxuICAgIGxldCBteUZpZWxkcyA9IG15R2FtZWJvYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZmllbGRcIik7XG4gICAgY29uc29sZS5sb2cobXlGaWVsZHMpXG4gICAgbGV0IGkgPSAwO1xuICAgIGFkZFNoaXBCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgIGlmKGdiMS5wbGFjZVNoaXBzKHBvc1hJbnB1dC52YWx1ZSwgcG9zWUlucHV0LnZhbHVlLCBzaGlwc0xlbmd0aFtpXSwgXCJoXCIpKSB7XG4gICAgICAgICAgICBVSS5kaXNwbGF5Qm9hcmQobXlHYW1lYm9hcmQsIGdiMS5nYW1lYm9hcmQpXG4gICAgICAgICAgICBpKys7IFxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgXG4gICAgbGV0IHkgPSAwO1xuICAgIGxldCBkaXIgPSBcIlwiO1xuICAgIHdoaWxlKHk8c2hpcHNMZW5ndGgubGVuZ3RoKSB7XG4gICAgICAgIGlmKGdldFJhbmRvbUludCgyKSA9PSAxKSB7XG4gICAgICAgICAgICBkaXIgPSBcInZcIlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGlyID0gXCJoXCJcbiAgICAgICAgfVxuICAgICAgICBpZihnYjIucGxhY2VTaGlwcyhnZXRSYW5kb21JbnQoOSksIGdldFJhbmRvbUludCg5KSwgc2hpcHNMZW5ndGhbeV0sIGRpcikpe1xuICAgICAgICAgICAgeSsrO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIFVJLmRpc3BsYXlCb2FyZChwY0dhbWVib2FyZCwgZ2IyLmdhbWVib2FyZClcblxuICAgIGNvbnN0IGVuZW15RmllbGRzID0gcGNHYW1lYm9hcmQucXVlcnlTZWxlY3RvckFsbChcIi5maWVsZFwiKTtcbiAgICBlbmVteUZpZWxkcy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihwbDEudHVybiAmJiBzdGFydCkge1xuICAgICAgICAgICAgICAgIGxldCByZXMgPSBnYjIucmVjZWl2ZUF0dGFjayhlLnRhcmdldC5kYXRhc2V0LnBvc1gsIGUudGFyZ2V0LmRhdGFzZXQucG9zWSlcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhnYjIuZ2FtZWJvYXJkKVxuICAgICAgICAgICAgICAgIGlmKHJlc1swXSkge1xuICAgICAgICAgICAgICAgICAgICBVSS5zaG93TWVzc2FnZShgWW91IHNob3Qgb24gdGhlIGNvb3JkaW5hdGVzICR7cmVzWzFdfSAke3Jlc1syXX0gYW5kIC4uLiBoaXQhYClcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBVSS5zaG93TWVzc2FnZShgWW91IHNob3Qgb24gdGhlIGNvb3JkaW5hdGVzICR7cmVzWzFdfSAke3Jlc1syXX0gYW5kIC4uLiBtaXNzZWQuYClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgVUkubWFya0JvYXJkKHJlc1swXSwgcmVzWzFdLCByZXNbMl0sIGdiMiwgZSlcbiAgICAgICAgICAgICAgICBpZihpc0dhbWVPdmVyKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoZ2IyLmFsbFNoaXBzU3VuaygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBVSS5zaG93TWVzc2FnZShcIllvdSB3b25cIilcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFVJLnNob3dNZXNzYWdlKFwiVGhlIFBDIHdvblwiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwbDEudHVybiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBsMS50dXJuKVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQocGNUdXJuLCAzMDAwKVxuICAgICAgICAgICAgfSAgXG4gICAgICAgIH0pXG4gICAgfSlcbiAgICAgXG4gICAgZnVuY3Rpb24gcGNUdXJuKCkge1xuICAgICAgICBpZihpc0dhbWVPdmVyKCkpIHJldHVyblxuICAgICAgICBsZXQgcmVzID0gZ2IxLnJlY2VpdmVBdHRhY2soZ2V0UmFuZG9tSW50KDkpLCBnZXRSYW5kb21JbnQoOSkpXG4gICAgICAgIGlmKHJlc1swXSkge1xuICAgICAgICAgICAgVUkuc2hvd01lc3NhZ2UoYFBDIHNob3Qgb24gdGhlIGNvb3JkaW5hdGVzICR7cmVzWzFdfSAke3Jlc1syXX0gYW5kIC4uLiBoaXQhYClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFVJLnNob3dNZXNzYWdlKGBQQyBzaG90IG9uIHRoZSBjb29yZGluYXRlcyAke3Jlc1sxXX0gJHtyZXNbMl19IGFuZCAuLi4gbWlzc2VkLmApXG4gICAgICAgIH1cbiAgICAgICAgVUkubWFya0JvYXJkKHJlc1swXSwgcmVzWzFdLCByZXNbMl0sIGdiMSwgZmFsc2UpXG4gICAgICAgIHBsMS50dXJuID0gcGwxLnN3YXBUdXJuKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNHYW1lT3ZlcigpIHtcbiAgICAgICAgaWYoZ2IxLmFsbFNoaXBzU3VuaygpIHx8IGdiMi5hbGxTaGlwc1N1bmsoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGdldFJhbmRvbUludChtYXgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1heCk7XG4gICAgICB9XG5cbn0pKCk7Il0sIm5hbWVzIjpbIkdhbWVib2FyZCIsImdhbWVib2FyZCIsImkiLCJwdXNoIiwieSIsInNoaXBzIiwicGxhY2VTaGlwcyIsInBvc1giLCJwb3NZIiwibGVuZ3RoIiwiZGlyIiwiY29uc29sZSIsImxvZyIsIk51bWJlciIsInNoaXAiLCJoaXRzIiwiaXNTdW5rIiwicmVjZWl2ZWRTaG90cyIsImhpdCIsIlNoaXAiLCJyZWNlaXZlQXR0YWNrIiwiYWxsU2hpcHNTdW5rIiwibWFwIiwiaW5jbHVkZXMiLCJVSSIsImluZm8iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJkaXNwbGF5Qm9hcmQiLCJjb250YWluZXIiLCJpbm5lckhUTUwiLCJkaXYiLCJjcmVhdGVFbGVtZW50IiwiZGF0YXNldCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIiwidGV4dENvbnRlbnQiLCJtYXJrQm9hcmQiLCJpc0hpdCIsImJvYXJkIiwiZSIsIm15RmllbGRzIiwicXVlcnlTZWxlY3RvckFsbCIsIm15RmllbGQiLCJBcnJheSIsImZyb20iLCJmaW5kIiwiZWxlbWVudCIsInRhcmdldCIsInNob3dNZXNzYWdlIiwidGV4dCIsIlBsYXllciIsIm5hbWUiLCJzd2FwVHVybiIsInR1cm4iLCJteUdhbWVib2FyZCIsInBjR2FtZWJvYXJkIiwiYWRkU2hpcEJ0biIsInBvc1hJbnB1dCIsInBvc1lJbnB1dCIsInNoaXBzTGVuZ3RoIiwiZ2IxIiwiZ2IyIiwicGwxIiwiYWRkRXZlbnRMaXN0ZW5lciIsInZhbHVlIiwiZ2V0UmFuZG9tSW50IiwibWF4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiZm9yRWFjaCJdLCJzb3VyY2VSb290IjoiIn0=